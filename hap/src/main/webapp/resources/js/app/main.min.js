var tab=null;var accordion=null;var tree=null;var tabItems=[];$(function(){$("#layout1").ligerLayout({leftWidth:190,height:"100%",heightDiff:-34,space:4,onHeightChanged:f_heightChanged});var b=$(".l-layout-center").height();$("#framecenter").ligerTab({height:b,showSwitchInTab:true,showSwitch:true,onAfterAddTabItem:function(c){tabItems.push(c)},onAfterRemoveTabItem:function(c){for(var d=0;d<tabItems.length;d++){var e=tabItems[d];if(e.tabid==c){tabItems.splice(d,1);break}}}});$("#accordion1").ligerAccordion({height:b-31,speed:null});$(".l-link").hover(function(){$(this).addClass("l-link-over")},function(){$(this).removeClass("l-link-over")});tab=liger.get("framecenter");accordion=liger.get("accordion1");$("#pageloading").hide();function a(e,c){for(var d=0;d<c.length;d++){var f=c[d];e.push("<li>");if(f.children){e.push('<a href="javascript:;">');e.push('<i class="'+(f.icon||"")+'"></i>');e.push('<span class="title">');e.push(f.text);e.push('</span><span class="arrow "></span></a><ul class="sub-menu">');a(e,f.children);e.push("</ul>")}else{if(f.url){e.push('<a style="white-space:nowrap" title="'+f.text+'" id="link'+f.id+'" href="javascript:f_addTab(\''+f.functionCode+"','"+f.text+"', '"+f.url+"')\">");e.push('<i class="'+(f.icon||"")+'"></i>');e.push(f.text);e.push("</a>")}}e.push("</li>")}}$.ajax({type:"GET",url:_basePath+"/sys/function/menus",contentType:"application/json; charset=utf-8",success:function(c){var d=[];c=[].concat(c);a(d,c);$(".page-sidebar-menu").append(d.join(""))}})});function f_heightChanged(a){if(tab){tab.addHeight(a.diff)}if(accordion&&a.middleHeight-24>0){accordion.setHeight(a.middleHeight-24)}}function f_addTab(a,d,b,c){setTimeout(function(){tab.addTabItem({tabid:a,text:d,url:b,showClose:c!=false});$(".page-sidebar-menu").find("a.active").removeClass("active");$("#link"+a).addClass("active")},100)}function f_removeTab(a){setTimeout(function(){tab.removeTabItem(a)},100)}function f_removeCurrentTab(){f_removeTab(tab.getSelectedTabItemID())};