<?xml version="1.0" encoding="UTF-8"?>
<report xmlns="http://www.eclipse.org/birt/2005/design" version="3.2.23" id="1">
    <property name="createdBy">Eclipse BIRT Designer Version 4.5.0.v201506092134 Build &lt;@BUILD@></property>
    <list-property name="propertyBindings">
        <structure>
            <property name="name">queryText</property>
            <property name="id">1949</property>
        </structure>
        <structure>
            <property name="name">queryTimeOut</property>
            <property name="id">1949</property>
        </structure>
        <structure>
            <property name="name">rowFetchSize</property>
            <property name="id">1949</property>
        </structure>
    </list-property>
	<list-property name="libraries">
        <structure>
            <property name="fileName">datasource.rptlibrary</property>
            <property name="namespace">datasource</property>
        </structure>
    </list-property>
    <property name="units">in</property>
    <property name="iconFile">/templates/blank_report.gif</property>
    <property name="bidiLayoutOrientation">ltr</property>
    <property name="imageDPI">120</property>
    <parameters>
        <parameter-group name="request" id="360">
            <parameters>
                <scalar-parameter name="locale" id="361">
                    <text-property name="helpText">language</text-property>
                    <text-property name="promptText">locale</text-property>
                    <property name="valueType">static</property>
                    <property name="isRequired">false</property>
                    <property name="dataType">string</property>
                    <property name="distinct">true</property>
                    <simple-property-list name="defaultValue">
                        <value type="constant">zh_TW</value>
                    </simple-property-list>
                    <list-property name="selectionList"/>
                    <property name="paramType">simple</property>
                    <property name="controlType">text-box</property>
                    <structure name="format">
                        <property name="category">Unformatted</property>
                    </structure>
                </scalar-parameter>
                <scalar-parameter name="marketId" id="362">
                    <text-property name="helpText">marketId</text-property>
                    <text-property name="promptText">marketId</text-property>
                    <property name="valueType">static</property>
                    <property name="isRequired">false</property>
                    <property name="dataType">string</property>
                    <property name="distinct">true</property>
                    <simple-property-list name="defaultValue">
                        <value type="constant">11000001</value>
                    </simple-property-list>
                    <list-property name="selectionList"/>
                    <property name="paramType">simple</property>
                    <property name="controlType">text-box</property>
                    <structure name="format">
                        <property name="category">Unformatted</property>
                    </structure>
                </scalar-parameter>
                <scalar-parameter name="salesOrgId" id="363">
                    <property name="hidden">false</property>
                    <text-property name="helpText">Sales Org Id</text-property>
                    <text-property name="promptText">salesOrgId</text-property>
                    <property name="valueType">static</property>
                    <property name="isRequired">true</property>
                    <property name="dataType">integer</property>
                    <property name="distinct">true</property>
                    <simple-property-list name="defaultValue">
                        <value type="constant">11000021</value>
                    </simple-property-list>
                    <list-property name="selectionList"/>
                    <property name="paramType">simple</property>
                    <property name="controlType">text-box</property>
                    <structure name="format">
                        <property name="category">Unformatted</property>
                    </structure>
                </scalar-parameter>
                <scalar-parameter name="invOrgId" id="10">
                    <text-property name="helpText">Inv Org id</text-property>
                    <text-property name="promptText">invOrgId</text-property>
                    <property name="valueType">static</property>
                    <property name="isRequired">false</property>
                    <property name="dataType">integer</property>
                    <property name="distinct">true</property>
                    <list-property name="selectionList"/>
                    <property name="paramType">simple</property>
                    <property name="controlType">text-box</property>
                    <structure name="format">
                        <property name="category">Unformatted</property>
                    </structure>
                </scalar-parameter>
                <scalar-parameter name="userId" id="11">
                    <text-property name="helpText">User Id</text-property>
                    <text-property name="promptText">userId</text-property>
                    <property name="valueType">static</property>
                    <property name="isRequired">false</property>
                    <property name="dataType">integer</property>
                    <property name="distinct">true</property>
                    <list-property name="selectionList"/>
                    <property name="paramType">simple</property>
                    <property name="controlType">text-box</property>
                    <structure name="format">
                        <property name="category">Unformatted</property>
                    </structure>
                </scalar-parameter>
                <scalar-parameter name="accountId" id="12">
                    <text-property name="helpText">accountId</text-property>
                    <text-property name="promptText">accountId</text-property>
                    <property name="valueType">static</property>
                    <property name="isRequired">false</property>
                    <property name="dataType">integer</property>
                    <property name="distinct">true</property>
                    <list-property name="selectionList"/>
                    <property name="paramType">simple</property>
                    <property name="controlType">text-box</property>
                    <structure name="format">
                        <property name="category">Unformatted</property>
                    </structure>
                </scalar-parameter>
                <scalar-parameter name="roleId" id="13">
                    <text-property name="helpText">roleId</text-property>
                    <text-property name="promptText">roleId</text-property>
                    <property name="valueType">static</property>
                    <property name="isRequired">false</property>
                    <property name="dataType">integer</property>
                    <property name="distinct">true</property>
                    <list-property name="selectionList"/>
                    <property name="paramType">simple</property>
                    <property name="controlType">text-box</property>
                    <structure name="format">
                        <property name="category">Unformatted</property>
                    </structure>
                </scalar-parameter>
                <scalar-parameter name="memberId" id="364">
                    <property name="hidden">false</property>
                    <text-property name="helpText">memberId</text-property>
                    <text-property name="promptText">memberId</text-property>
                    <property name="valueType">static</property>
                    <property name="isRequired">false</property>
                    <property name="dataType">integer</property>
                    <property name="distinct">true</property>
                    <list-property name="selectionList"/>
                    <property name="paramType">simple</property>
                    <property name="concealValue">false</property>
                    <property name="controlType">text-box</property>
                    <structure name="format">
                        <property name="category">Unformatted</property>
                    </structure>
                </scalar-parameter>
            </parameters>
        </parameter-group>
        <scalar-parameter name="year" id="1972">
            <text-property name="helpText">year</text-property>
            <text-property name="promptText">year</text-property>
            <property name="valueType">static</property>
            <property name="dataType">string</property>
            <property name="distinct">true</property>
            <simple-property-list name="defaultValue">
                <value type="constant">2016</value>
            </simple-property-list>
            <list-property name="selectionList"/>
            <property name="paramType">simple</property>
            <property name="controlType">text-box</property>
            <structure name="format">
                <property name="category">Unformatted</property>
            </structure>
        </scalar-parameter>
        <scalar-parameter name="month" id="1973">
            <text-property name="helpText">month</text-property>
            <text-property name="promptText">month</text-property>
            <property name="valueType">static</property>
            <property name="dataType">string</property>
            <property name="distinct">true</property>
            <simple-property-list name="defaultValue">
                <value type="constant">1</value>
            </simple-property-list>
            <list-property name="selectionList"/>
            <property name="paramType">simple</property>
            <property name="controlType">text-box</property>
            <structure name="format">
                <property name="category">Unformatted</property>
            </structure>
        </scalar-parameter>
        <scalar-parameter name="orgId" id="1974">
            <text-property name="helpText">orgId</text-property>
            <text-property name="promptText">orgId</text-property>
            <property name="valueType">static</property>
            <property name="dataType">string</property>
            <property name="distinct">true</property>
            <simple-property-list name="defaultValue">
                <value type="constant">6</value>
            </simple-property-list>
            <list-property name="selectionList"/>
            <property name="paramType">simple</property>
            <property name="controlType">text-box</property>
            <structure name="format">
                <property name="category">Unformatted</property>
            </structure>
        </scalar-parameter>
    </parameters>
    <data-sources>
        <oda-data-source extensionID="org.eclipse.birt.report.data.oda.jdbc" name="Data Source" id="999"
 extends="datasource.Data Source"/>
    </data-sources>
    <data-sets>
        <oda-data-set extensionID="org.eclipse.birt.report.data.oda.jdbc.JdbcSelectDataSet" name="Unit_Cost" id="1949">
            <property name="nullsOrdering">nulls lowest</property>
            <list-property name="columnHints">
                <structure>
                    <property name="columnName">INV_ORG_ID</property>
                    <property name="alias">INV_ORG_ID</property>
                    <property name="analysis">measure</property>
                    <text-property name="displayName">INV_ORG_ID</text-property>
                    <property name="onColumnLayout">false</property>
                    <text-property name="heading">INV_ORG_ID</text-property>
                </structure>
                <structure>
                    <property name="columnName">ITEM_ID</property>
                    <property name="alias">ITEM_ID</property>
                    <property name="analysis">measure</property>
                    <text-property name="displayName">ITEM_ID</text-property>
                    <property name="onColumnLayout">false</property>
                    <text-property name="heading">ITEM_ID</text-property>
                </structure>
                <structure>
                    <property name="columnName">ITEM_NAME</property>
                    <property name="alias">ITEM_NAME</property>
                    <property name="analysis">dimension</property>
                    <text-property name="displayName">ITEM_NAME</text-property>
                    <property name="onColumnLayout">false</property>
                    <text-property name="heading">ITEM_NAME</text-property>
                </structure>
                <structure>
                    <property name="columnName">YEAR</property>
                    <property name="alias">YEAR</property>
                    <property name="analysis">measure</property>
                    <text-property name="displayName">YEAR</text-property>
                    <property name="onColumnLayout">false</property>
                    <text-property name="heading">YEAR</text-property>
                </structure>
                <structure>
                    <property name="columnName">MONTH</property>
                    <property name="alias">MONTH</property>
                    <property name="analysis">measure</property>
                    <text-property name="displayName">MONTH</text-property>
                    <property name="onColumnLayout">false</property>
                    <text-property name="heading">MONTH</text-property>
                </structure>
                <structure>
                    <property name="columnName">LAST_MONTH_QTY</property>
                    <property name="alias">LAST_MONTH_QTY</property>
                    <property name="analysis">measure</property>
                    <text-property name="displayName">LAST_MONTH_QTY</text-property>
                    <property name="onColumnLayout">false</property>
                    <text-property name="heading">LAST_MONTH_QTY</text-property>
                </structure>
                <structure>
                    <property name="columnName">LAST_MONTH_UNIT_COST</property>
                    <property name="alias">LAST_MONTH_UNIT_COST</property>
                    <property name="analysis">measure</property>
                    <text-property name="displayName">LAST_MONTH_UNIT_COST</text-property>
                    <property name="onColumnLayout">false</property>
                    <text-property name="heading">LAST_MONTH_UNIT_COST</text-property>
                </structure>
                <structure>
                    <property name="columnName">LAST_MONTH_BALANCE</property>
                    <property name="alias">LAST_MONTH_BALANCE</property>
                    <property name="analysis">measure</property>
                    <text-property name="displayName">LAST_MONTH_BALANCE</text-property>
                    <property name="onColumnLayout">false</property>
                    <text-property name="heading">LAST_MONTH_BALANCE</text-property>
                </structure>
                <structure>
                    <property name="columnName">CURRENT_STKIN_QTY</property>
                    <property name="alias">CURRENT_STKIN_QTY</property>
                    <property name="analysis">measure</property>
                    <text-property name="displayName">CURRENT_STKIN_QTY</text-property>
                    <property name="onColumnLayout">false</property>
                    <text-property name="heading">CURRENT_STKIN_QTY</text-property>
                </structure>
                <structure>
                    <property name="columnName">CURRENT_UNIT_COST</property>
                    <property name="alias">CURRENT_UNIT_COST</property>
                    <property name="analysis">measure</property>
                    <text-property name="displayName">CURRENT_UNIT_COST</text-property>
                    <property name="onColumnLayout">false</property>
                    <text-property name="heading">CURRENT_UNIT_COST</text-property>
                </structure>
                <structure>
                    <property name="columnName">CURRENT_COMCP_QTY</property>
                    <property name="alias">CURRENT_COMCP_QTY</property>
                    <property name="analysis">measure</property>
                    <text-property name="displayName">CURRENT_COMCP_QTY</text-property>
                    <property name="onColumnLayout">false</property>
                    <text-property name="heading">CURRENT_COMCP_QTY</text-property>
                </structure>
                <structure>
                    <property name="columnName">CURRENT_COST_QTY</property>
                    <property name="alias">CURRENT_COST_QTY</property>
                    <property name="analysis">measure</property>
                    <text-property name="displayName">CURRENT_COST_QTY</text-property>
                    <property name="onColumnLayout">false</property>
                    <text-property name="heading">CURRENT_COST_QTY</text-property>
                </structure>
                <structure>
                    <property name="columnName">TRX_QTY</property>
                    <property name="alias">TRX_QTY</property>
                    <property name="analysis">measure</property>
                    <text-property name="displayName">TRX_QTY</text-property>
                    <property name="onColumnLayout">false</property>
                    <text-property name="heading">TRX_QTY</text-property>
                </structure>
                <structure>
                    <property name="columnName">UNIT_COST_SUB</property>
                    <property name="alias">UNIT_COST_SUB</property>
                    <property name="analysis">measure</property>
                    <text-property name="displayName">UNIT_COST_SUB</text-property>
                    <property name="onColumnLayout">false</property>
                    <text-property name="heading">UNIT_COST_SUB</text-property>
                </structure>
            </list-property>
            <list-property name="parameters">
                <structure>
                    <property name="name">locale</property>
                    <property name="paramName">locale</property>
                    <property name="nativeName"></property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">0</property>
                    <property name="position">1</property>
                    <property name="isOptional">false</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
                <structure>
                    <property name="name">year2</property>
                    <property name="paramName">year</property>
                    <property name="nativeName"></property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">0</property>
                    <property name="position">2</property>
                    <property name="isOptional">false</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
                <structure>
                    <property name="name">month2</property>
                    <property name="paramName">month</property>
                    <property name="nativeName"></property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">0</property>
                    <property name="position">3</property>
                    <property name="isOptional">false</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
                <structure>
                    <property name="name">invOrgId</property>
                    <property name="paramName">orgId</property>
                    <property name="nativeName"></property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">0</property>
                    <property name="position">4</property>
                    <property name="isOptional">false</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
                <structure>
                    <property name="name">year3</property>
                    <property name="paramName">year</property>
                    <property name="nativeName"></property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">0</property>
                    <property name="position">5</property>
                    <property name="isOptional">false</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
                <structure>
                    <property name="name">month3</property>
                    <property name="paramName">month</property>
                    <property name="nativeName"></property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">0</property>
                    <property name="position">6</property>
                    <property name="isOptional">false</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
            </list-property>
            <structure name="cachedMetaData">
                <list-property name="resultSet">
                    <structure>
                        <property name="position">1</property>
                        <property name="name">INV_ORG_ID</property>
                        <property name="dataType">decimal</property>
                    </structure>
                    <structure>
                        <property name="position">2</property>
                        <property name="name">ITEM_ID</property>
                        <property name="dataType">decimal</property>
                    </structure>
                    <structure>
                        <property name="position">3</property>
                        <property name="name">ITEM_NAME</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">4</property>
                        <property name="name">YEAR</property>
                        <property name="dataType">decimal</property>
                    </structure>
                    <structure>
                        <property name="position">5</property>
                        <property name="name">MONTH</property>
                        <property name="dataType">decimal</property>
                    </structure>
                    <structure>
                        <property name="position">6</property>
                        <property name="name">LAST_MONTH_QTY</property>
                        <property name="dataType">decimal</property>
                    </structure>
                    <structure>
                        <property name="position">7</property>
                        <property name="name">LAST_MONTH_UNIT_COST</property>
                        <property name="dataType">decimal</property>
                    </structure>
                    <structure>
                        <property name="position">8</property>
                        <property name="name">LAST_MONTH_BALANCE</property>
                        <property name="dataType">decimal</property>
                    </structure>
                    <structure>
                        <property name="position">9</property>
                        <property name="name">CURRENT_STKIN_QTY</property>
                        <property name="dataType">decimal</property>
                    </structure>
                    <structure>
                        <property name="position">10</property>
                        <property name="name">CURRENT_UNIT_COST</property>
                        <property name="dataType">decimal</property>
                    </structure>
                    <structure>
                        <property name="position">11</property>
                        <property name="name">CURRENT_COMCP_QTY</property>
                        <property name="dataType">decimal</property>
                    </structure>
                    <structure>
                        <property name="position">12</property>
                        <property name="name">CURRENT_COST_QTY</property>
                        <property name="dataType">decimal</property>
                    </structure>
                    <structure>
                        <property name="position">13</property>
                        <property name="name">CURRENT_BALANCE_UNIT</property>
                        <property name="dataType">decimal</property>
                    </structure>
                    <structure>
                        <property name="position">14</property>
                        <property name="name">TRX_QTY</property>
                        <property name="dataType">decimal</property>
                    </structure>
                    <structure>
                        <property name="position">15</property>
                        <property name="name">UNIT_COST_SUB</property>
                        <property name="dataType">decimal</property>
                    </structure>
                </list-property>
            </structure>
            <property name="dataSource">Data Source</property>
            <list-property name="resultSet">
                <structure>
                    <property name="position">1</property>
                    <property name="name">INV_ORG_ID</property>
                    <property name="nativeName">INV_ORG_ID</property>
                    <property name="dataType">decimal</property>
                    <property name="nativeDataType">0</property>
                </structure>
                <structure>
                    <property name="position">2</property>
                    <property name="name">ITEM_ID</property>
                    <property name="nativeName">ITEM_ID</property>
                    <property name="dataType">decimal</property>
                    <property name="nativeDataType">0</property>
                </structure>
                <structure>
                    <property name="position">3</property>
                    <property name="name">ITEM_NAME</property>
                    <property name="nativeName">ITEM_NAME</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">0</property>
                </structure>
                <structure>
                    <property name="position">4</property>
                    <property name="name">YEAR</property>
                    <property name="nativeName">YEAR</property>
                    <property name="dataType">decimal</property>
                    <property name="nativeDataType">0</property>
                </structure>
                <structure>
                    <property name="position">5</property>
                    <property name="name">MONTH</property>
                    <property name="nativeName">MONTH</property>
                    <property name="dataType">decimal</property>
                    <property name="nativeDataType">0</property>
                </structure>
                <structure>
                    <property name="position">6</property>
                    <property name="name">LAST_MONTH_QTY</property>
                    <property name="nativeName">LAST_MONTH_QTY</property>
                    <property name="dataType">decimal</property>
                    <property name="nativeDataType">0</property>
                </structure>
                <structure>
                    <property name="position">7</property>
                    <property name="name">LAST_MONTH_UNIT_COST</property>
                    <property name="nativeName">LAST_MONTH_UNIT_COST</property>
                    <property name="dataType">decimal</property>
                    <property name="nativeDataType">0</property>
                </structure>
                <structure>
                    <property name="position">8</property>
                    <property name="name">LAST_MONTH_BALANCE</property>
                    <property name="nativeName">LAST_MONTH_BALANCE</property>
                    <property name="dataType">decimal</property>
                    <property name="nativeDataType">0</property>
                </structure>
                <structure>
                    <property name="position">9</property>
                    <property name="name">CURRENT_STKIN_QTY</property>
                    <property name="nativeName">CURRENT_STKIN_QTY</property>
                    <property name="dataType">decimal</property>
                    <property name="nativeDataType">0</property>
                </structure>
                <structure>
                    <property name="position">10</property>
                    <property name="name">CURRENT_UNIT_COST</property>
                    <property name="nativeName">CURRENT_UNIT_COST</property>
                    <property name="dataType">decimal</property>
                    <property name="nativeDataType">0</property>
                </structure>
                <structure>
                    <property name="position">11</property>
                    <property name="name">CURRENT_COMCP_QTY</property>
                    <property name="nativeName">CURRENT_COMCP_QTY</property>
                    <property name="dataType">decimal</property>
                    <property name="nativeDataType">0</property>
                </structure>
                <structure>
                    <property name="position">12</property>
                    <property name="name">CURRENT_COST_QTY</property>
                    <property name="nativeName">CURRENT_COST_QTY</property>
                    <property name="dataType">decimal</property>
                    <property name="nativeDataType">0</property>
                </structure>
                <structure>
                    <property name="position">13</property>
                    <property name="name">CURRENT_BALANCE_UNIT</property>
                    <property name="nativeName">CURRENT_BALANCE_UNIT</property>
                    <property name="dataType">decimal</property>
                    <property name="nativeDataType">0</property>
                </structure>
                <structure>
                    <property name="position">14</property>
                    <property name="name">TRX_QTY</property>
                    <property name="nativeName">TRX_QTY</property>
                    <property name="dataType">decimal</property>
                    <property name="nativeDataType">0</property>
                </structure>
                <structure>
                    <property name="position">15</property>
                    <property name="name">UNIT_COST_SUB</property>
                    <property name="nativeName">UNIT_COST_SUB</property>
                    <property name="dataType">decimal</property>
                    <property name="nativeDataType">0</property>
                </structure>
            </list-property>
            <xml-property name="queryText"><![CDATA[
--台湾成本计算
SELECT DISTINCT ICR.COST_ORG_ID AS INV_ORG_ID,
                ICR.ITEM_ID,
                TL.ITEM_NAME,
                ICR.YEAR AS YEAR,
                ICR.MONTH AS MONTH,
                NVL(LAST_UNIT_COST.QTY_SUM, 0) AS LAST_MONTH_QTY, --商品_上月结余_数量1
                NVL(LAST_UNIT_COST.UNIT_COST_SUM, 0) AS LAST_MONTH_UNIT_COST, --商品_上月结余_单价
                NVL(LAST_UNIT_COST.BALANCE_SUM, 0) AS LAST_MONTH_BALANCE, --商品_上月结余_总额
                NVL(CURRENT_STKIN.QTY_SUM, 0) AS CURRENT_STKIN_QTY, --商品_本期进货_数量2 STKIN
                NVL(CURRENT_STKIN.UNIT_COST_SUM, 0) AS CURRENT_UNIT_COST, --商品_本期进货_单价 STKIN(还要/数量)
                --Calculate 商品_本期进货_总额：单价*数量             
                NVL(CURRENT_COMCP_QTY.NOW_MONTH_QTY, 0) AS CURRENT_COMCP_QTY, --商品_本月换入数量3 COMCP
                --Calculate 商品_本月换入_总额   
                NVL(CURRENT_COST_QTY.NOW_MONTH_QTY, 0) AS CURRENT_COST_QTY, --商品_本月成本数量4
                --Calculate 商品_本月成本_总额              
                --本月结余_数量：1+2+3+4
                NVL(CURRENT_BALANCE.UNIT_COST_SUM, 0) AS CURRENT_BALANCE_UNIT, --本月结余_单价      
                --本月结余_总额：单价*数量                
                NVL(CURRENT_TRX_QTY.TRX_QTY_SUM, 0) AS TRX_QTY, --子商品_事务处理数量                                                                          
                NVL(ITEM_SUB.UNIT_COST_SUM_SUB, 0) AS UNIT_COST_SUB --子商品_成本单价
  FROM INV_COST_RECORDS ICR
  LEFT OUTER JOIN INV_ITEM_TL TL
    ON TL.ITEM_ID = ICR.ITEM_ID
   AND TL.LANG = ?
  LEFT OUTER JOIN ( --本月进货
                   SELECT ICD.ITEM_ID,
                           ICD.COST_ORG_ID,
                           ICD.YEAR,
                           ICD.MONTH,
                           SUM(ICD.QUANTITY) QTY_SUM,
                           SUM(ICD.QUANTITY * ICD.UNIT_COST) UNIT_COST_SUM
                     FROM INV_COST_DETAILS ICD
                    WHERE ICD.STATUS = 'P'
                      AND ICD.TRX_TYPE = 'STKIN'
                    GROUP BY (ICD.ITEM_ID, ICD.COST_ORG_ID, ICD.YEAR,
                               ICD.MONTH)) CURRENT_STKIN
    ON CURRENT_STKIN.ITEM_ID = ICR.ITEM_ID
   AND CURRENT_STKIN.COST_ORG_ID = ICR.COST_ORG_ID
   AND CURRENT_STKIN.YEAR = ICR.YEAR
   AND CURRENT_STKIN.MONTH = ICR.MONTH
  LEFT OUTER JOIN ( --上月结余
                   SELECT ICR.ITEM_ID,
                           ICR.COST_ORG_ID,
                           ICR.YEAR,
                           ICR.MONTH,
                           NVL(SUM(ICR.UNIT_COST), 0) AS UNIT_COST_SUM, --上月结余-单价
                           NVL(SUM(ICR.QUANTITY), 0) AS QTY_SUM, --上月结余-数量
                           NVL(SUM(ICR.BALANCE), 0) AS BALANCE_SUM --上月结余-总额
                     FROM INV_COST_RECORDS ICR
                    WHERE ICR.STATUS = 'P'
                    GROUP BY (ICR.COST_ORG_ID, ICR.ITEM_ID, ICR.YEAR,
                               ICR.MONTH)) LAST_UNIT_COST
    ON LAST_UNIT_COST.ITEM_ID = ICR.ITEM_ID
   AND LAST_UNIT_COST.COST_ORG_ID = ICR.COST_ORG_ID
   AND LAST_UNIT_COST.YEAR = (CASE
         WHEN ICR.MONTH = 1 THEN
          ICR.YEAR - 1
         ELSE
          ICR.YEAR
       END)
   AND LAST_UNIT_COST.MONTH = (CASE
         WHEN ICR.MONTH = 1 THEN
          12
         ELSE
          ICR.MONTH - 1
       END)
  LEFT OUTER JOIN ( --本月换入数量
                   SELECT INV_TRX.ITEM_ID,
                           INV_TRX.TRX_TYPE,
                           SODB.COST_ORG_ID,
                           TO_CHAR(INV_TRX.TRX_DATE, 'YYYY') TRX_DATE_YEAR,
                           TO_CHAR(INV_TRX.TRX_DATE, 'MM') TRX_DATE_MONTH,
                           SUM(INV_TRX.TRX_QTY) NOW_MONTH_QTY
                     FROM INV_TRANSACTION INV_TRX
                     LEFT OUTER JOIN SPM_ORG_DEFINATION_B SODB
                       ON INV_TRX.ORGANIZATION_ID = SODB.INV_ORG_ID
                    WHERE INV_TRX.TRX_TYPE = 'COMCP'
                    GROUP BY (INV_TRX.ITEM_ID, SODB.COST_ORG_ID,
                               INV_TRX.TRX_TYPE,
                               TO_CHAR(INV_TRX.TRX_DATE, 'YYYY'),
                               TO_CHAR(INV_TRX.TRX_DATE, 'MM'))) CURRENT_COMCP_QTY
    ON CURRENT_COMCP_QTY.ITEM_ID = ICR.ITEM_ID
   AND CURRENT_COMCP_QTY.COST_ORG_ID = ICR.COST_ORG_ID
   AND TO_NUMBER(CURRENT_COMCP_QTY.TRX_DATE_YEAR) = ICR.YEAR
   AND TO_NUMBER(CURRENT_COMCP_QTY.TRX_DATE_MONTH) = ICR.MONTH
  LEFT OUTER JOIN ( --本月成本数量
                   SELECT INV_TRX.ITEM_ID,
                           SODB.COST_ORG_ID,
                           TO_CHAR(INV_TRX.TRX_DATE, 'YYYY') TRX_DATE_YEAR,
                           TO_CHAR(INV_TRX.TRX_DATE, 'MM') TRX_DATE_MONTH,
                           SUM(INV_TRX.TRX_QTY) NOW_MONTH_QTY
                     FROM INV_TRANSACTION INV_TRX
                     LEFT OUTER JOIN SPM_ORG_DEFINATION_B SODB
                       ON INV_TRX.ORGANIZATION_ID = SODB.INV_ORG_ID
                    WHERE INV_TRX.TRX_TYPE NOT IN ('COMCP', 'STKIN')
                    GROUP BY (SODB.COST_ORG_ID, INV_TRX.ITEM_ID,
                               TO_CHAR(INV_TRX.TRX_DATE, 'YYYY'),
                               TO_CHAR(INV_TRX.TRX_DATE, 'MM'))) CURRENT_COST_QTY
    ON CURRENT_COST_QTY.ITEM_ID = ICR.ITEM_ID
   AND CURRENT_COST_QTY.COST_ORG_ID = ICR.COST_ORG_ID
   AND TO_NUMBER(CURRENT_COST_QTY.TRX_DATE_YEAR) = ICR.YEAR
   AND TO_NUMBER(CURRENT_COST_QTY.TRX_DATE_MONTH) = ICR.MONTH
  LEFT OUTER JOIN ( --本月结余单价
                   SELECT ICR.ITEM_ID,
                           ICR.COST_ORG_ID,
                           ICR.YEAR,
                           ICR.MONTH,
                           SUM(ICR.UNIT_COST) UNIT_COST_SUM
                     FROM INV_COST_RECORDS ICR
                    WHERE ICR.STATUS = 'P'
                    GROUP BY (ICR.COST_ORG_ID, ICR.ITEM_ID, ICR.YEAR,
                               ICR.MONTH)) CURRENT_BALANCE
    ON CURRENT_BALANCE.ITEM_ID = ICR.ITEM_ID
   AND CURRENT_BALANCE.COST_ORG_ID = ICR.COST_ORG_ID
   AND CURRENT_BALANCE.YEAR = ICR.YEAR
   AND CURRENT_BALANCE.MONTH = ICR.MONTH
  LEFT OUTER JOIN ( --本月事务处理数量
                   SELECT INV_TRX.ITEM_ID,
                           SODB.COST_ORG_ID,
                           TO_CHAR(INV_TRX.TRX_DATE, 'YYYY') TRX_DATE_YEAR,
                           TO_CHAR(INV_TRX.TRX_DATE, 'MM') TRX_DATE_MONTH,
                           SUM(INV_TRX.TRX_QTY) TRX_QTY_SUM
                     FROM INV_TRANSACTION INV_TRX
                     LEFT OUTER JOIN SPM_ORG_DEFINATION_B SODB
                       ON INV_TRX.ORGANIZATION_ID = SODB.INV_ORG_ID
                    GROUP BY INV_TRX.ITEM_ID,
                              SODB.COST_ORG_ID,
                              TO_CHAR(INV_TRX.TRX_DATE, 'YYYY'),
                              TO_CHAR(INV_TRX.TRX_DATE, 'MM')) CURRENT_TRX_QTY
    ON CURRENT_TRX_QTY.ITEM_ID = ICR.ITEM_ID
   AND CURRENT_TRX_QTY.COST_ORG_ID = ICR.COST_ORG_ID
   AND TO_NUMBER(CURRENT_TRX_QTY.TRX_DATE_YEAR) = ICR.YEAR
   AND TO_NUMBER(CURRENT_TRX_QTY.TRX_DATE_MONTH) = ICR.MONTH
  LEFT OUTER JOIN ( --子商品期末单价
                   SELECT UNIT_COST_SUB.PACKAGE_ITEM_ID,
                           NVL(SUM(UNIT_COST_SUB.UNIT_COST_SUB), 0) UNIT_COST_SUM_SUB
                     FROM (SELECT DISTINCT INV_TRX.ITEM_ID,
                                            INV_TRX.PACKAGE_ITEM_ID,
                                            LAST_COST_SUB.YEAR R_Y,
                                            LAST_COST_SUB.MONTH R_M,
                                            CURRENT_STKIN_SUB.YEAR D_Y,
                                            CURRENT_STKIN_SUB.MONTH D_M,
                                            (CASE
                                              WHEN (NVL(LAST_COST_SUB.QTY_SUM, 0) +
                                                   NVL(CURRENT_STKIN_SUB.QTY_SUM,
                                                        0)) = 0 THEN
                                               0
                                              ELSE
                                               (NVL(LAST_COST_SUB.BALANCE_SUM, 0) +
                                               NVL(CURRENT_STKIN_SUB.UNIT_COST_SUM,
                                                    0)) /
                                               (NVL(LAST_COST_SUB.QTY_SUM, 0) +
                                               NVL(CURRENT_STKIN_SUB.QTY_SUM, 0))
                                            END) AS UNIT_COST_SUB --子商品_期末单价
                              FROM INV_TRANSACTION INV_TRX
                              LEFT OUTER JOIN SPM_ORG_DEFINATION_B SODB
                                ON INV_TRX.ORGANIZATION_ID = SODB.INV_ORG_ID
                              LEFT OUTER JOIN ( --子商品上月结余
                                              SELECT IT_TRX.ITEM_ID,
                                                      IT_TRX.PACKAGE_ITEM_ID,
                                                      ICR_SUB.COST_ORG_ID,
                                                      ICR_SUB.YEAR,
                                                      ICR_SUB.MONTH,
                                                      NVL(SUM(ICR_SUB.QUANTITY),
                                                          0) QTY_SUM, --子商品上月结余-数量
                                                      NVL(SUM(ICR_SUB.BALANCE), 0) BALANCE_SUM --子商品上月结余-总额
                                                FROM INV_TRANSACTION IT_TRX
                                                LEFT OUTER JOIN INV_COST_RECORDS ICR_SUB
                                                  ON IT_TRX.ORGANIZATION_ID =
                                                     ICR_SUB.INV_ORG_ID
                                                 AND ICR_SUB.ITEM_ID =
                                                     IT_TRX.ITEM_ID
                                                 AND ICR_SUB.YEAR =
                                                     TO_CHAR(IT_TRX.TRX_DATE,
                                                             'YYYY')
                                                 AND ICR_SUB.MONTH =
                                                     TO_CHAR(IT_TRX.TRX_DATE,
                                                             'MM')
                                               WHERE ICR_SUB.STATUS = 'P'
                                                 AND (IT_TRX.ITEM_ID !=
                                                     IT_TRX.PACKAGE_ITEM_ID)
                                               GROUP BY (IT_TRX.ITEM_ID,
                                                          IT_TRX.PACKAGE_ITEM_ID,
                                                          ICR_SUB.YEAR,
                                                          ICR_SUB.MONTH,
                                                          ICR_SUB.COST_ORG_ID)) LAST_COST_SUB
                                ON LAST_COST_SUB.PACKAGE_ITEM_ID =
                                   INV_TRX.PACKAGE_ITEM_ID
                               AND LAST_COST_SUB.ITEM_ID = INV_TRX.ITEM_ID
                               AND LAST_COST_SUB.COST_ORG_ID = SODB.COST_ORG_ID
                               AND CONCAT(LAST_COST_SUB.YEAR,
                                          LPAD(LAST_COST_SUB.MONTH, 2, 0)) =
                                   TO_CHAR(ADD_MONTHS(INV_TRX.TRX_DATE, -1),
                                           'YYYYMM')
                              LEFT OUTER JOIN ( --子商品当月进货 STKIN
                                              SELECT IT_TRX.ITEM_ID,
                                                      IT_TRX.PACKAGE_ITEM_ID,
                                                      ICD_SUB.COST_ORG_ID,
                                                      ICD_SUB.YEAR,
                                                      ICD_SUB.MONTH,
                                                      SUM(ICD_SUB.QUANTITY) QTY_SUM,
                                                      SUM(ICD_SUB.QUANTITY *
                                                          ICD_SUB.UNIT_COST) UNIT_COST_SUM
                                                FROM INV_TRANSACTION IT_TRX
                                                LEFT OUTER JOIN INV_COST_DETAILS ICD_SUB
                                                  ON ICD_SUB.ITEM_ID =
                                                     IT_TRX.ITEM_ID
                                                 AND ICD_SUB.INV_ORG_ID =
                                                     IT_TRX.ORGANIZATION_ID
                                                 AND ICD_SUB.YEAR =
                                                     TO_CHAR(IT_TRX.TRX_DATE,
                                                             'YYYY')
                                                 AND ICD_SUB.MONTH =
                                                     TO_CHAR(IT_TRX.TRX_DATE,
                                                             'MM')
                                               WHERE ICD_SUB.STATUS = 'P'
                                                 AND ICD_SUB.TRX_TYPE = 'STKIN'
                                                 AND IT_TRX.ITEM_ID !=
                                                     IT_TRX.PACKAGE_ITEM_ID
                                               GROUP BY (IT_TRX.ITEM_ID,
                                                          IT_TRX.PACKAGE_ITEM_ID,
                                                          ICD_SUB.COST_ORG_ID,
                                                          ICD_SUB.YEAR,
                                                          ICD_SUB.MONTH)) CURRENT_STKIN_SUB
                                ON (CURRENT_STKIN_SUB.PACKAGE_ITEM_ID =
                                   INV_TRX.PACKAGE_ITEM_ID)
                               AND CURRENT_STKIN_SUB.ITEM_ID = INV_TRX.ITEM_ID
                               AND CURRENT_STKIN_SUB.COST_ORG_ID =
                                   SODB.COST_ORG_ID
                               AND CURRENT_STKIN_SUB.YEAR =
                                   TO_CHAR(INV_TRX.TRX_DATE, 'YYYY')
                               AND CURRENT_STKIN_SUB.MONTH =
                                   TO_CHAR(INV_TRX.TRX_DATE, 'MM')
                             WHERE TO_CHAR(INV_TRX.TRX_DATE, 'YYYYMM') =
                                   CONCAT(?, LPAD(?, 2, 0))) UNIT_COST_SUB
                    GROUP BY UNIT_COST_SUB.PACKAGE_ITEM_ID) ITEM_SUB
    ON ITEM_SUB.PACKAGE_ITEM_ID = ICR.ITEM_ID
   AND CURRENT_COMCP_QTY.TRX_TYPE = 'COMCP'
 WHERE ICR.COST_ORG_ID = ?
   AND ICR.YEAR = ?
   AND ICR.MONTH = ?
 ORDER BY ICR.ITEM_ID
]]></xml-property>
            <xml-property name="designerValues"><![CDATA[<?xml version="1.0" encoding="UTF-8"?>
<model:DesignValues xmlns:design="http://www.eclipse.org/datatools/connectivity/oda/design" xmlns:model="http://www.eclipse.org/birt/report/model/adapter/odaModel">
  <Version>2.0</Version>
  <design:ResultSets derivedMetaData="true">
    <design:resultSetDefinitions>
      <design:resultSetColumns>
        <design:resultColumnDefinitions>
          <design:attributes>
            <design:identifier>
              <design:name>ITEM_ID</design:name>
              <design:position>1</design:position>
            </design:identifier>
            <design:nativeDataTypeCode>2</design:nativeDataTypeCode>
            <design:precision>20</design:precision>
            <design:scale>0</design:scale>
            <design:nullability>NotNullable</design:nullability>
            <design:uiHints>
              <design:displayName>ITEM_ID</design:displayName>
            </design:uiHints>
          </design:attributes>
          <design:usageHints>
            <design:label>ITEM_ID</design:label>
            <design:formattingHints>
              <design:displaySize>21</design:displaySize>
            </design:formattingHints>
          </design:usageHints>
        </design:resultColumnDefinitions>
        <design:resultColumnDefinitions>
          <design:attributes>
            <design:identifier>
              <design:name>ITEM_NAME</design:name>
              <design:position>2</design:position>
            </design:identifier>
            <design:nativeDataTypeCode>12</design:nativeDataTypeCode>
            <design:precision>120</design:precision>
            <design:scale>0</design:scale>
            <design:nullability>Nullable</design:nullability>
            <design:uiHints>
              <design:displayName>ITEM_NAME</design:displayName>
            </design:uiHints>
          </design:attributes>
          <design:usageHints>
            <design:label>ITEM_NAME</design:label>
            <design:formattingHints>
              <design:displaySize>120</design:displaySize>
            </design:formattingHints>
          </design:usageHints>
        </design:resultColumnDefinitions>
        <design:resultColumnDefinitions>
          <design:attributes>
            <design:identifier>
              <design:name>BEFORE_QTY</design:name>
              <design:position>3</design:position>
            </design:identifier>
            <design:nativeDataTypeCode>2</design:nativeDataTypeCode>
            <design:precision>0</design:precision>
            <design:scale>0</design:scale>
            <design:nullability>Nullable</design:nullability>
            <design:uiHints>
              <design:displayName>BEFORE_QTY</design:displayName>
            </design:uiHints>
          </design:attributes>
          <design:usageHints>
            <design:label>BEFORE_QTY</design:label>
            <design:formattingHints>
              <design:displaySize>39</design:displaySize>
            </design:formattingHints>
          </design:usageHints>
        </design:resultColumnDefinitions>
        <design:resultColumnDefinitions>
          <design:attributes>
            <design:identifier>
              <design:name>BEFORE_UNIT_COST</design:name>
              <design:position>4</design:position>
            </design:identifier>
            <design:nativeDataTypeCode>2</design:nativeDataTypeCode>
            <design:precision>0</design:precision>
            <design:scale>0</design:scale>
            <design:nullability>Nullable</design:nullability>
            <design:uiHints>
              <design:displayName>BEFORE_UNIT_COST</design:displayName>
            </design:uiHints>
          </design:attributes>
          <design:usageHints>
            <design:label>BEFORE_UNIT_COST</design:label>
            <design:formattingHints>
              <design:displaySize>39</design:displaySize>
            </design:formattingHints>
          </design:usageHints>
        </design:resultColumnDefinitions>
        <design:resultColumnDefinitions>
          <design:attributes>
            <design:identifier>
              <design:name>BEFORE_BALANCE</design:name>
              <design:position>5</design:position>
            </design:identifier>
            <design:nativeDataTypeCode>2</design:nativeDataTypeCode>
            <design:precision>0</design:precision>
            <design:scale>0</design:scale>
            <design:nullability>Nullable</design:nullability>
            <design:uiHints>
              <design:displayName>BEFORE_BALANCE</design:displayName>
            </design:uiHints>
          </design:attributes>
          <design:usageHints>
            <design:label>BEFORE_BALANCE</design:label>
            <design:formattingHints>
              <design:displaySize>39</design:displaySize>
            </design:formattingHints>
          </design:usageHints>
        </design:resultColumnDefinitions>
        <design:resultColumnDefinitions>
          <design:attributes>
            <design:identifier>
              <design:name>NOW_QTY_SUM</design:name>
              <design:position>6</design:position>
            </design:identifier>
            <design:nativeDataTypeCode>2</design:nativeDataTypeCode>
            <design:precision>0</design:precision>
            <design:scale>0</design:scale>
            <design:nullability>Nullable</design:nullability>
            <design:uiHints>
              <design:displayName>NOW_QTY_SUM</design:displayName>
            </design:uiHints>
          </design:attributes>
          <design:usageHints>
            <design:label>NOW_QTY_SUM</design:label>
            <design:formattingHints>
              <design:displaySize>39</design:displaySize>
            </design:formattingHints>
          </design:usageHints>
        </design:resultColumnDefinitions>
        <design:resultColumnDefinitions>
          <design:attributes>
            <design:identifier>
              <design:name>NOW_UNIT_COST</design:name>
              <design:position>7</design:position>
            </design:identifier>
            <design:nativeDataTypeCode>2</design:nativeDataTypeCode>
            <design:precision>0</design:precision>
            <design:scale>0</design:scale>
            <design:nullability>Nullable</design:nullability>
            <design:uiHints>
              <design:displayName>NOW_UNIT_COST</design:displayName>
            </design:uiHints>
          </design:attributes>
          <design:usageHints>
            <design:label>NOW_UNIT_COST</design:label>
            <design:formattingHints>
              <design:displaySize>39</design:displaySize>
            </design:formattingHints>
          </design:usageHints>
        </design:resultColumnDefinitions>
        <design:resultColumnDefinitions>
          <design:attributes>
            <design:identifier>
              <design:name>NOW_MONTH_QTY</design:name>
              <design:position>8</design:position>
            </design:identifier>
            <design:nativeDataTypeCode>2</design:nativeDataTypeCode>
            <design:precision>0</design:precision>
            <design:scale>0</design:scale>
            <design:nullability>Nullable</design:nullability>
            <design:uiHints>
              <design:displayName>NOW_MONTH_QTY</design:displayName>
            </design:uiHints>
          </design:attributes>
          <design:usageHints>
            <design:label>NOW_MONTH_QTY</design:label>
            <design:formattingHints>
              <design:displaySize>39</design:displaySize>
            </design:formattingHints>
          </design:usageHints>
        </design:resultColumnDefinitions>
        <design:resultColumnDefinitions>
          <design:attributes>
            <design:identifier>
              <design:name>NOW_COST_QRY</design:name>
              <design:position>9</design:position>
            </design:identifier>
            <design:nativeDataTypeCode>2</design:nativeDataTypeCode>
            <design:precision>0</design:precision>
            <design:scale>0</design:scale>
            <design:nullability>Nullable</design:nullability>
            <design:uiHints>
              <design:displayName>NOW_COST_QRY</design:displayName>
            </design:uiHints>
          </design:attributes>
          <design:usageHints>
            <design:label>NOW_COST_QRY</design:label>
            <design:formattingHints>
              <design:displaySize>39</design:displaySize>
            </design:formattingHints>
          </design:usageHints>
        </design:resultColumnDefinitions>
        <design:resultColumnDefinitions>
          <design:attributes>
            <design:identifier>
              <design:name>NOW_BALANCE_UNIT</design:name>
              <design:position>10</design:position>
            </design:identifier>
            <design:nativeDataTypeCode>2</design:nativeDataTypeCode>
            <design:precision>0</design:precision>
            <design:scale>0</design:scale>
            <design:nullability>Nullable</design:nullability>
            <design:uiHints>
              <design:displayName>NOW_BALANCE_UNIT</design:displayName>
            </design:uiHints>
          </design:attributes>
          <design:usageHints>
            <design:label>NOW_BALANCE_UNIT</design:label>
            <design:formattingHints>
              <design:displaySize>39</design:displaySize>
            </design:formattingHints>
          </design:usageHints>
        </design:resultColumnDefinitions>
        <design:resultColumnDefinitions>
          <design:attributes>
            <design:identifier>
              <design:name>NOW_QTY_SUM_1</design:name>
              <design:position>11</design:position>
            </design:identifier>
            <design:nativeDataTypeCode>2</design:nativeDataTypeCode>
            <design:precision>0</design:precision>
            <design:scale>-127</design:scale>
            <design:nullability>Nullable</design:nullability>
            <design:uiHints>
              <design:displayName>NOW_QTY_SUM_1</design:displayName>
            </design:uiHints>
          </design:attributes>
          <design:usageHints>
            <design:label>NOW_QTY_SUM_1</design:label>
            <design:formattingHints>
              <design:displaySize>39</design:displaySize>
            </design:formattingHints>
          </design:usageHints>
        </design:resultColumnDefinitions>
        <design:resultColumnDefinitions>
          <design:attributes>
            <design:identifier>
              <design:name>NOW_UNIT_COST_1</design:name>
              <design:position>12</design:position>
            </design:identifier>
            <design:nativeDataTypeCode>2</design:nativeDataTypeCode>
            <design:precision>0</design:precision>
            <design:scale>-127</design:scale>
            <design:nullability>Nullable</design:nullability>
            <design:uiHints>
              <design:displayName>NOW_UNIT_COST_1</design:displayName>
            </design:uiHints>
          </design:attributes>
          <design:usageHints>
            <design:label>NOW_UNIT_COST_1</design:label>
            <design:formattingHints>
              <design:displaySize>39</design:displaySize>
            </design:formattingHints>
          </design:usageHints>
        </design:resultColumnDefinitions>
        <design:resultColumnDefinitions>
          <design:attributes>
            <design:identifier>
              <design:name>BEFORE_QTY_1</design:name>
              <design:position>13</design:position>
            </design:identifier>
            <design:nativeDataTypeCode>2</design:nativeDataTypeCode>
            <design:precision>0</design:precision>
            <design:scale>-127</design:scale>
            <design:nullability>Nullable</design:nullability>
            <design:uiHints>
              <design:displayName>BEFORE_QTY_1</design:displayName>
            </design:uiHints>
          </design:attributes>
          <design:usageHints>
            <design:label>BEFORE_QTY_1</design:label>
            <design:formattingHints>
              <design:displaySize>39</design:displaySize>
            </design:formattingHints>
          </design:usageHints>
        </design:resultColumnDefinitions>
        <design:resultColumnDefinitions>
          <design:attributes>
            <design:identifier>
              <design:name>BEFORE_BALANCE_1</design:name>
              <design:position>14</design:position>
            </design:identifier>
            <design:nativeDataTypeCode>2</design:nativeDataTypeCode>
            <design:precision>0</design:precision>
            <design:scale>-127</design:scale>
            <design:nullability>Nullable</design:nullability>
            <design:uiHints>
              <design:displayName>BEFORE_BALANCE_1</design:displayName>
            </design:uiHints>
          </design:attributes>
          <design:usageHints>
            <design:label>BEFORE_BALANCE_1</design:label>
            <design:formattingHints>
              <design:displaySize>39</design:displaySize>
            </design:formattingHints>
          </design:usageHints>
        </design:resultColumnDefinitions>
      </design:resultSetColumns>
      <design:criteria/>
    </design:resultSetDefinitions>
  </design:ResultSets>
</model:DesignValues>]]></xml-property>
        </oda-data-set>
    </data-sets>
    <page-setup>
        <simple-master-page name="Simple MasterPage" id="2">
            <property name="type">a4</property>
            <property name="orientation">landscape</property>
        </simple-master-page>
    </page-setup>
    <body>
        <table id="1806">
            <property name="dataSet">Unit_Cost</property>
            <list-property name="boundDataColumns">
                <structure>
                    <property name="name">ITEM_NAME</property>
                    <text-property name="displayName">ITEM_NAME</text-property>
                    <expression name="expression" type="javascript">dataSetRow["ITEM_NAME"]</expression>
                    <property name="dataType">string</property>
                </structure>
                <structure>
                    <property name="name">LAST_MONTH_BALANCE</property>
                    <text-property name="displayName">LAST_MONTH_BALANCE</text-property>
                    <expression name="expression" type="javascript">dataSetRow["LAST_MONTH_BALANCE"]</expression>
                    <property name="dataType">decimal</property>
                </structure>
                <structure>
                    <property name="name">LAST_MONTH_QTY</property>
                    <text-property name="displayName">LAST_MONTH_QTY</text-property>
                    <expression name="expression" type="javascript">dataSetRow["LAST_MONTH_QTY"]</expression>
                    <property name="dataType">decimal</property>
                </structure>
                <structure>
                    <property name="name">LAST_MONTH_UNIT_COST</property>
                    <text-property name="displayName">LAST_MONTH_UNIT_COST</text-property>
                    <expression name="expression" type="javascript">dataSetRow["LAST_MONTH_UNIT_COST"]</expression>
                    <property name="dataType">decimal</property>
                </structure>
                <structure>
                    <property name="name">CURRENT_STKIN_QTY</property>
                    <text-property name="displayName">CURRENT_STKIN_QTY</text-property>
                    <expression name="expression" type="javascript">dataSetRow["CURRENT_STKIN_QTY"]</expression>
                    <property name="dataType">decimal</property>
                </structure>
                <structure>
                    <property name="name">CURRENT_STKIN_UNIT_COST</property>
                    <text-property name="displayName">CURRENT_STKIN_UNIT_COST</text-property>
                    <expression name="expression" type="javascript">if (dataSetRow["CURRENT_STKIN_QTY"] == 0) &#13;
	0&#13;
else&#13;
	dataSetRow["CURRENT_UNIT_COST"]/dataSetRow["CURRENT_STKIN_QTY"]</expression>
                    <property name="dataType">decimal</property>
                    <property name="allowExport">true</property>
                </structure>
                <structure>
                    <property name="name">CURRENT_BALANCE</property>
                    <text-property name="displayName">CURRENT_BALANCE</text-property>
                    <expression name="expression" type="javascript">row["CURRENT_STKIN_QTY"]*row["CURRENT_STKIN_UNIT_COST"]</expression>
                    <property name="dataType">decimal</property>
                    <property name="allowExport">true</property>
                </structure>
                <structure>
                    <property name="name">CURRENT_COMCP_QTY</property>
                    <text-property name="displayName">CURRENT_COMCP_QTY</text-property>
                    <expression name="expression" type="javascript">dataSetRow["CURRENT_COMCP_QTY"]</expression>
                    <property name="dataType">decimal</property>
                </structure>
                <structure>
                    <property name="name">CURRENT_STKIN_BALANCE</property>
                    <text-property name="displayName">CURRENT_STKIN_BALANCE</text-property>
                    <expression name="expression" type="javascript">dataSetRow["CURRENT_COMCP_QTY"]*dataSetRow["UNIT_COST_SUB"]</expression>
                    <property name="dataType">decimal</property>
                    <property name="allowExport">true</property>
                </structure>
                <structure>
                    <property name="name">CURRENT_COST_QTY</property>
                    <text-property name="displayName">CURRENT_COST_QTY</text-property>
                    <expression name="expression" type="javascript">if (dataSetRow["CURRENT_COST_QTY"] &lt; 0)&#13;
	-dataSetRow["CURRENT_COST_QTY"]&#13;
else&#13;
	dataSetRow["CURRENT_COST_QTY"]</expression>
                    <property name="dataType">decimal</property>
                    <property name="allowExport">true</property>
                </structure>
                <structure>
                    <property name="name">CURRENT_UNIT_COST</property>
                    <text-property name="displayName">CURRENT_UNIT_COST</text-property>
                    <expression name="expression" type="javascript">dataSetRow["CURRENT_BALANCE_UNIT"]</expression>
                    <property name="dataType">string</property>
                    <property name="allowExport">true</property>
                </structure>
                <structure>
                    <property name="name">CURRENT_COST_BALANCE</property>
                    <text-property name="displayName">CURRENT_COST_BALANCE</text-property>
                    <expression name="expression" type="javascript">row["CURRENT_COST_QTY"]*row["CURRENT_UNIT_COST"]</expression>
                    <property name="dataType">decimal</property>
                    <property name="allowExport">true</property>
                </structure>
                <structure>
                    <property name="name">CURRENT_END_BALANCE</property>
                    <text-property name="displayName">CURRENT_END_BALANCE</text-property>
                    <expression name="expression" type="javascript">dataSetRow["LAST_MONTH_QTY"]+dataSetRow["CURRENT_STKIN_QTY"]+dataSetRow["CURRENT_COMCP_QTY"]+dataSetRow["CURRENT_COST_QTY"]</expression>
                    <property name="dataType">decimal</property>
                    <property name="allowExport">true</property>
                </structure>
                <structure>
                    <property name="name">CURRENT_END_SUM</property>
                    <text-property name="displayName">CURRENT_END_SUM</text-property>
                    <expression name="expression" type="javascript">row["CURRENT_END_BALANCE"]*row["CURRENT_BALANCE_UNIT"]</expression>
                    <property name="dataType">decimal</property>
                    <property name="allowExport">true</property>
                </structure>
                <structure>
                    <property name="name">CURRENT_BALANCE_UNIT</property>
                    <text-property name="displayName">CURRENT_BALANCE_UNIT</text-property>
                    <expression name="expression" type="javascript">dataSetRow["CURRENT_BALANCE_UNIT"]</expression>
                    <property name="dataType">decimal</property>
                </structure>
            </list-property>
            <column id="1830"/>
            <column id="1835"/>
            <column id="1819"/>
            <column id="1876"/>
            <column id="1871"/>
            <column id="1866"/>
            <column id="1861"/>
            <column id="1856"/>
            <column id="1851"/>
            <column id="1846"/>
            <column id="1820"/>
            <column id="1821"/>
            <column id="1886"/>
            <column id="1901"/>
            <column id="1896"/>
            <header>
                <row id="1807">
                    <property name="fontFamily">"Arial"</property>
                    <property name="fontWeight">bold</property>
                    <property name="borderBottomStyle">solid</property>
                    <property name="borderBottomWidth">thin</property>
                    <property name="borderTopStyle">solid</property>
                    <property name="borderTopWidth">thin</property>
                    <property name="textAlign">center</property>
                    <cell id="1826">
                        <property name="colSpan">1</property>
                        <property name="rowSpan">2</property>
                        <property name="borderRightStyle">solid</property>
                        <property name="borderRightWidth">thin</property>
                        <label id="1877">
                            <text-property name="text">商品名称</text-property>
                        </label>
                    </cell>
                    <cell id="1831">
                        <property name="colSpan">3</property>
                        <property name="rowSpan">1</property>
                        <property name="borderRightStyle">solid</property>
                        <property name="borderRightWidth">thin</property>
                        <label id="1878">
                            <text-property name="text">上月结余</text-property>
                        </label>
                    </cell>
                    <cell id="1867">
                        <property name="colSpan">3</property>
                        <property name="rowSpan">1</property>
                        <property name="borderRightStyle">solid</property>
                        <property name="borderRightWidth">thin</property>
                        <label id="1879">
                            <text-property name="text">本期进货</text-property>
                        </label>
                    </cell>
                    <cell id="1852">
                        <property name="colSpan">2</property>
                        <property name="rowSpan">1</property>
                        <property name="borderRightStyle">solid</property>
                        <property name="borderRightWidth">thin</property>
                        <label id="1880">
                            <text-property name="text">本月换入</text-property>
                        </label>
                    </cell>
                    <cell id="1842">
                        <property name="colSpan">3</property>
                        <property name="rowSpan">1</property>
                        <property name="borderRightStyle">solid</property>
                        <property name="borderRightWidth">thin</property>
                        <label id="1881">
                            <text-property name="text">本月成本</text-property>
                        </label>
                    </cell>
                    <cell id="1882">
                        <property name="colSpan">3</property>
                        <property name="rowSpan">1</property>
                        <label id="1902">
                            <text-property name="text">本月结余</text-property>
                        </label>
                    </cell>
                </row>
                <row id="1919">
                    <property name="fontFamily">"Arial"</property>
                    <property name="fontWeight">bold</property>
                    <property name="borderBottomStyle">solid</property>
                    <property name="borderBottomWidth">thin</property>
                    <property name="textAlign">center</property>
                    <cell id="1921">
                        <property name="borderRightStyle">solid</property>
                        <property name="borderRightWidth">thin</property>
                        <label id="1935">
                            <text-property name="text">数量</text-property>
                        </label>
                    </cell>
                    <cell id="1922">
                        <property name="borderRightStyle">solid</property>
                        <property name="borderRightWidth">thin</property>
                        <label id="1936">
                            <text-property name="text">单价</text-property>
                        </label>
                    </cell>
                    <cell id="1923">
                        <property name="borderRightStyle">solid</property>
                        <property name="borderRightWidth">thin</property>
                        <label id="1937">
                            <text-property name="text">总额</text-property>
                        </label>
                    </cell>
                    <cell id="1924">
                        <property name="borderRightStyle">solid</property>
                        <property name="borderRightWidth">thin</property>
                        <label id="1938">
                            <text-property name="text">数量</text-property>
                        </label>
                    </cell>
                    <cell id="1925">
                        <property name="borderRightStyle">solid</property>
                        <property name="borderRightWidth">thin</property>
                        <label id="1939">
                            <text-property name="text">单价</text-property>
                        </label>
                    </cell>
                    <cell id="1926">
                        <property name="borderRightStyle">solid</property>
                        <property name="borderRightWidth">thin</property>
                        <label id="1940">
                            <text-property name="text">总额</text-property>
                        </label>
                    </cell>
                    <cell id="1927">
                        <property name="borderRightStyle">solid</property>
                        <property name="borderRightWidth">thin</property>
                        <label id="1941">
                            <text-property name="text">数量</text-property>
                        </label>
                    </cell>
                    <cell id="1928">
                        <property name="borderRightStyle">solid</property>
                        <property name="borderRightWidth">thin</property>
                        <label id="1942">
                            <text-property name="text">总额</text-property>
                        </label>
                    </cell>
                    <cell id="1929">
                        <property name="borderRightStyle">solid</property>
                        <property name="borderRightWidth">thin</property>
                        <label id="1943">
                            <text-property name="text">数量</text-property>
                        </label>
                    </cell>
                    <cell id="1930">
                        <property name="borderRightStyle">solid</property>
                        <property name="borderRightWidth">thin</property>
                        <label id="1944">
                            <text-property name="text">单价</text-property>
                        </label>
                    </cell>
                    <cell id="1931">
                        <property name="borderRightStyle">solid</property>
                        <property name="borderRightWidth">thin</property>
                        <label id="1945">
                            <text-property name="text">总额</text-property>
                        </label>
                    </cell>
                    <cell id="1932">
                        <property name="borderRightStyle">solid</property>
                        <property name="borderRightWidth">thin</property>
                        <label id="1946">
                            <text-property name="text">数量</text-property>
                        </label>
                    </cell>
                    <cell id="1933">
                        <property name="borderRightStyle">solid</property>
                        <property name="borderRightWidth">thin</property>
                        <label id="1947">
                            <text-property name="text">单价</text-property>
                        </label>
                    </cell>
                    <cell id="1934">
                        <label id="1948">
                            <text-property name="text">总额</text-property>
                        </label>
                    </cell>
                </row>
            </header>
            <detail>
                <row id="1811">
                    <property name="borderBottomStyle">solid</property>
                    <property name="borderBottomWidth">thin</property>
                    <property name="textAlign">left</property>
                    <cell id="1828">
                        <property name="borderRightStyle">solid</property>
                        <property name="borderRightWidth">thin</property>
                        <property name="verticalAlign">middle</property>
                        <data id="1975">
                            <property name="resultSetColumn">ITEM_NAME</property>
                        </data>
                    </cell>
                    <cell id="1833">
                        <property name="borderRightStyle">solid</property>
                        <property name="borderRightWidth">thin</property>
                        <property name="verticalAlign">middle</property>
                        <data id="1977">
                            <property name="resultSetColumn">LAST_MONTH_QTY</property>
                        </data>
                    </cell>
                    <cell id="1812">
                        <property name="borderRightStyle">solid</property>
                        <property name="borderRightWidth">thin</property>
                        <property name="verticalAlign">middle</property>
                        <data id="1978">
                            <structure name="numberFormat">
                                <property name="category">Currency</property>
                                <property name="pattern">###0.00{RoundingMode=HALF_UP}</property>
                            </structure>
                            <property name="resultSetColumn">LAST_MONTH_UNIT_COST</property>
                        </data>
                    </cell>
                    <cell id="1874">
                        <property name="borderRightStyle">solid</property>
                        <property name="borderRightWidth">thin</property>
                        <property name="verticalAlign">middle</property>
                        <data id="1976">
                            <structure name="numberFormat">
                                <property name="category">Currency</property>
                                <property name="pattern">###0{RoundingMode=HALF_UP}</property>
                            </structure>
                            <property name="resultSetColumn">LAST_MONTH_BALANCE</property>
                        </data>
                    </cell>
                    <cell id="1869">
                        <property name="borderRightStyle">solid</property>
                        <property name="borderRightWidth">thin</property>
                        <property name="verticalAlign">middle</property>
                        <data id="1979">
                            <property name="resultSetColumn">CURRENT_STKIN_QTY</property>
                        </data>
                    </cell>
                    <cell id="1864">
                        <property name="borderRightStyle">solid</property>
                        <property name="borderRightWidth">thin</property>
                        <property name="verticalAlign">middle</property>
                        <data id="1980">
                            <structure name="numberFormat">
                                <property name="category">Currency</property>
                                <property name="pattern">###0.00{RoundingMode=HALF_UP}</property>
                            </structure>
                            <property name="resultSetColumn">CURRENT_STKIN_UNIT_COST</property>
                        </data>
                    </cell>
                    <cell id="1859">
                        <property name="borderRightStyle">solid</property>
                        <property name="borderRightWidth">thin</property>
                        <property name="verticalAlign">middle</property>
                        <data id="1981">
                            <structure name="numberFormat">
                                <property name="category">Currency</property>
                                <property name="pattern">###0{RoundingMode=HALF_UP}</property>
                            </structure>
                            <property name="resultSetColumn">CURRENT_BALANCE</property>
                        </data>
                    </cell>
                    <cell id="1854">
                        <property name="borderRightStyle">solid</property>
                        <property name="borderRightWidth">thin</property>
                        <property name="verticalAlign">middle</property>
                        <data id="1982">
                            <property name="resultSetColumn">CURRENT_COMCP_QTY</property>
                        </data>
                    </cell>
                    <cell id="1849">
                        <property name="borderRightStyle">solid</property>
                        <property name="borderRightWidth">thin</property>
                        <property name="verticalAlign">middle</property>
                        <data id="1983">
                            <structure name="numberFormat">
                                <property name="category">Currency</property>
                                <property name="pattern">###0{RoundingMode=HALF_UP}</property>
                            </structure>
                            <property name="resultSetColumn">CURRENT_STKIN_BALANCE</property>
                        </data>
                    </cell>
                    <cell id="1844">
                        <property name="borderRightStyle">solid</property>
                        <property name="borderRightWidth">thin</property>
                        <property name="verticalAlign">middle</property>
                        <data id="1985">
                            <property name="resultSetColumn">CURRENT_COST_QTY</property>
                        </data>
                    </cell>
                    <cell id="1813">
                        <property name="borderRightStyle">solid</property>
                        <property name="borderRightWidth">thin</property>
                        <property name="verticalAlign">middle</property>
                        <data id="1986">
                            <structure name="numberFormat">
                                <property name="category">Currency</property>
                                <property name="pattern">###0.00{RoundingMode=HALF_UP}</property>
                            </structure>
                            <property name="resultSetColumn">CURRENT_UNIT_COST</property>
                        </data>
                    </cell>
                    <cell id="1814">
                        <property name="borderRightStyle">solid</property>
                        <property name="borderRightWidth">thin</property>
                        <property name="verticalAlign">middle</property>
                        <data id="1987">
                            <structure name="numberFormat">
                                <property name="category">Currency</property>
                                <property name="pattern">###0{RoundingMode=HALF_UP}</property>
                            </structure>
                            <property name="resultSetColumn">CURRENT_COST_BALANCE</property>
                        </data>
                    </cell>
                    <cell id="1884">
                        <property name="borderRightStyle">solid</property>
                        <property name="borderRightWidth">thin</property>
                        <property name="verticalAlign">middle</property>
                        <data id="1988">
                            <property name="resultSetColumn">CURRENT_END_BALANCE</property>
                        </data>
                    </cell>
                    <cell id="1899">
                        <property name="borderRightStyle">solid</property>
                        <property name="borderRightWidth">thin</property>
                        <property name="verticalAlign">middle</property>
                        <data id="1991">
                            <property name="resultSetColumn">CURRENT_BALANCE_UNIT</property>
                        </data>
                    </cell>
                    <cell id="1894">
                        <property name="verticalAlign">middle</property>
                        <data id="1990">
                            <structure name="numberFormat">
                                <property name="category">Currency</property>
                                <property name="pattern">###0{RoundingMode=HALF_UP}</property>
                            </structure>
                            <property name="resultSetColumn">CURRENT_END_SUM</property>
                        </data>
                    </cell>
                </row>
            </detail>
            <footer>
                <row id="1815">
                    <cell id="1829"/>
                    <cell id="1834"/>
                    <cell id="1816"/>
                    <cell id="1875"/>
                    <cell id="1870"/>
                    <cell id="1865"/>
                    <cell id="1860"/>
                    <cell id="1855"/>
                    <cell id="1850"/>
                    <cell id="1845"/>
                    <cell id="1817"/>
                    <cell id="1818"/>
                    <cell id="1885"/>
                    <cell id="1900"/>
                    <cell id="1895"/>
                </row>
            </footer>
        </table>
    </body>
</report>
