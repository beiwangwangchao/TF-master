(function(b,a,c){b.CatSlider=function(d,e){this.$el=b(e);this._init(d)};b.CatSlider.prototype={_init:function(e){this.$categories=this.$el.children("ul");this.$navcategories=this.$el.find("nav > a");var d={WebkitAnimation:"webkitAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd",animation:"animationend"};this.animEndEventName=d[Modernizr.prefixed("animation")];this.support=Modernizr.csstransforms&&Modernizr.cssanimations;this.isAnimating=false;this.current=0;var f=this.$categories.eq(0);if(!this.support){this.$categories.hide();f.show()}else{f.addClass("mi-current")}this.$navcategories.eq(0).addClass("mi-selected");this._initEvents()},_initEvents:function(){var d=this;this.$navcategories.on("click.catslider",function(){d.showCategory(b(this).index());return false});b(a).on("resize",function(){d.$categories.removeClass().eq(0).addClass("mi-current");d.$navcategories.eq(d.current).removeClass("mi-selected").end().eq(0).addClass("mi-selected");d.current=0})},showCategory:function(i){if(i===this.current||this.isAnimating){return false}this.isAnimating=true;this.$navcategories.eq(this.current).removeClass("mi-selected").end().eq(i).addClass("mi-selected");var g=i>this.current?"right":"left",d=g==="right"?"mi-moveToLeft":"mi-moveToRight",h=g==="right"?"mi-moveFromRight":"mi-moveFromLeft",e=this.$categories.eq(this.current),f=this.$categories.eq(i),j=f.children(),k=g==="right"?j.length-1:0,l=this;if(this.support){e.removeClass().addClass(d);setTimeout(function(){f.removeClass().addClass(h);j.eq(k).on(l.animEndEventName,function(){b(this).off(l.animEndEventName);f.addClass("mi-current");l.current=i;var m=b(this);l.forceRedraw(m.get(0));l.isAnimating=false})},j.length*90)}else{e.hide();f.show();this.current=i;this.isAnimating=false}},forceRedraw:function(e){if(!e){return}var f=document.createTextNode(" "),d=e.style.position;e.appendChild(f);e.style.position="relative";setTimeout(function(){e.style.position=d;f.parentNode.removeChild(f)},25)}};b.fn.catslider=function(f){var d=b.data(this,"catslider");if(typeof f==="string"){var e=Array.prototype.slice.call(arguments,1);this.each(function(){d[f].apply(d,e)})}else{this.each(function(){d?d._init():d=b.data(this,"catslider",new b.CatSlider(f,this))})}return d}})(jQuery,window);